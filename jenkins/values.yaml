controller:
  image:
    registry: docker.io
    repository: jenkins/jenkins
    tag: lts

  serviceType: NodePort
  nodePort: 32005

  persistence:
    enabled: true
    storageClass: "local-path"
    accessMode: ReadWriteOnce
    size: 5Gi

  JCasC:
    enabled: true
    configScripts:
      my-jcasc: |
        # === КЛЮЧЕВОЕ ИСПРАВЛЕНИЕ: jobs: теперь является ключом верхнего уровня в JCasC YAML ===
        # Обратите внимание на отступы!
        jenkins: # Этот блок содержит общие настройки Jenkins
          # Если у вас есть другие настройки Jenkins (например, systemMessage), они должны быть здесь.
          # systemMessage: "Configured via JCasC" # Можно добавить, если хотите, но может конфликтовать.
        
        # === ЭТО ПРАВИЛЬНАЯ ПОЗИЦИЯ ДЛЯ JOBS ===
        # Jobs должен быть на том же уровне отступа, что и "jenkins:" в JCasC YAML.
        # То есть, "jobs:" должен начинаться с того же отступа, что и "jenkins:".
        jobs:
          - script: >
              pipelineJob('hello-world') {
                definition {
                  cps {
                    script('''node { echo "Hello world" }''')
                  }
                }
              }
        
        # Если у вас были другие секции JCasC (например, security, clouds, unclassified),
        # они также должны быть здесь, на том же уровне, что и "jenkins:" и "jobs:".
